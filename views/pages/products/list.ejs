<% layout('../../layouts/main') -%>

<h2>Nos produits</h2>

<div class="filters">
    <form method="GET" action="/products">
        <select name="category">
            <option value="">Toutes catégories</option>
            <option value="construction">Matériaux de construction</option>
            <option value="fresh_food">Vivres frais</option>
            <option value="combustible_consumables">Consommables combustibles</option>
            <option value="non_combustible_consumables">Consommables non combustibles</option>
            <option value="fuel">Carburant</option>
            <option value="metalwork">Menuiserie métallique</option>
            <option value="sheets">Tôles</option>
            <option value="diamonds_gold">Diamant et Or</option>
            <option value="vehicles">Véhicules</option>
        </select>
        <button type="submit">Filtrer</button>
    </form>
</div>

<div class="product-list">
    <% products.forEach(product => { %>
        <div class="product-item">
            <% if(product.imageUrl) { %>
                <img src="<%= product.imageUrl %>" alt="<%= product.name %>">
            <% } %>
            <div class="product-info">
                <h3><%= product.name %></h3>
                <p class="category"><%= product.category %></p>
                <p class="description"><%= product.description.substring(0, 100) %>...</p>
                <a href="/products/<%= product.id %>" class="btn">Voir détails</a>
            </div>
        </div>
    <% }) %>
</div>